{"version":3,"sources":["../src/lib/models/FormModel.js","../src/lib/views/FormView.js"],"names":[],"mappings":"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","file":"marionette-forms.js","sourcesContent":["var FormModel = Backbone.Model.extend({\n    // validar cada tipo de datos lanzando un evento\n\n    types: ['email', 'text', 'number', 'url'],\n\n    validations: {\n        email: /^[\\w\\-]{1,}([\\w\\-\\+.]{1,1}[\\w\\-]{1,}){0,}[@][\\w\\-]{1,}([.]([\\w\\-]{1,})){1,3}$/,\n        url: /^(http|https):\\/\\/(([A-Z0-9][A-Z0-9_\\-]*)(\\.[A-Z0-9][A-Z0-9_\\-]*)+)(:(\\d+))?\\/?/i,\n        number: /^[0-9]*\\.?[0-9]*?$/,\n        text: function(input) {\n            return (typeof input === 'string' && input.length > 2);\n        }\n    },\n\n    validate: function(attributes, options) {\n\n        if (_.has(options, 'key') && _.has(options, 'type') && _.contains(this.types, options.type)) {\n            var valid;\n            if (typeof this.validations[options.type] === 'function') {\n                valid = this.validations[options.type](attributes[options.key]);\n            } else {\n                valid = this.validations[options.type].test(attributes[options.key]);\n            }\n\n            if (!valid) {\n                this.trigger('invalid:'+options.key, options);\n                return options.message;\n            }\n        }\n    }\n\n});\n\nBackbone.Marionette.FormModel = FormModel;","var FormView = Backbone.Marionette.View.extend({\n\n    defaultSchema: {\n        ui: null,\n        event: null,\n        validate: false,\n        type: 'text',\n        message: 'invalid field'\n    },\n\n    delegateFormEvents: function() {\n\n        if (_.isEmpty(this.schema) || !this.$el) {\n            return;\n        }\n\n        if (_.isUndefined(this.ui)) {\n            this.ui = {};\n        }\n\n        if (_.isUndefined(this.model)) {\n            this.model = new Backbone.Marionette.FormModel();\n        }\n\n        _.each(this.schema, _.bind(function(_item, key) {\n\n            var item = _.extend(_.clone(this.defaultSchema), _item);\n            item.key = key;\n\n            if (_.isNull(item.ui) || _.isNull(item.event)) {\n                return;\n            }\n\n            this.ui[key] = this.$el.find(item.ui);\n            this.delegate(item.event, item.ui, _.bind(this.saveItem, this), item);\n            if (item.validate) {\n                this.listenTo(this.model, 'invalid:'+key, this.errorItem);\n            }\n\n        }, this));\n\n        this.listenTo(this.model, 'invalid', this.invalid);\n    },\n\n    delegate: function(eventName, selector, listener, options) {\n        var opts = options || {};\n        this.$el.on(eventName + '.formEvents' + this.cid, selector, opts, listener);\n    },\n\n    undelegateFormEvents: function() {\n        if (this.$el) {\n            this.$el.off('.formEvents' + this.cid);\n        }\n        return this;\n    },\n\n    delegateEvents: function(events) {\n        this._delegateDOMEvents(events);\n        // delegate automatically form events\n        this.delegateFormEvents();\n        this.bindEntityEvents(this.model, this.getOption('modelEvents'));\n        this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));\n        return this;\n    },\n\n    undelegateEvents: function() {\n        var args = Array.prototype.slice.call(arguments);\n        Backbone.View.prototype.undelegateEvents.apply(this, args);\n        // undelegate automatically form events\n        this.undelegateFormEvents();\n        this.unbindEntityEvents(this.model, this.getOption('modelEvents'));\n        this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));\n        return this;\n    },\n\n    saveItem: function(event) {\n        var options = event.data || null;\n        if (_.isNull(options)) {\n            return;\n        }\n        this.valid();\n        this.ui[options.key].removeClass('error');\n        this.model.set(options.key, this.ui[options.key].val(), options);\n    },\n\n    errorItem: function(options) {\n        if (!options || _.isEmpty(options) || !this.ui[options.key]) {\n            return;\n        }\n        this.ui[options.key].addClass('error');\n    },\n\n    invalid: function() {\n        // override this function\n    },\n\n    valid: function() {\n        // override this function\n    }\n\n});\n\nBackbone.Marionette.FormView = FormView;"]}